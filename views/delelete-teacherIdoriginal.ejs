<%- include('partials/header'); -%>


<div>
    <div class="mainTeacherID">
        <div class="rightSideTeacherID">
          <div class="rightContainer">
       
                <div class="player" id="${teacher.profileVideo}">
                  <iframe class='iframeVideo'
                  src='https://www.youtube.com/embed/<%= teacher.profileVideo %>' 
                  frameborder="0" 
                  allow="autoplay; clipboard-write; encrypted-media; picture-in-picture" 
                  allowfullscreen="true"
                  mute
                ></iframe>
                </div> 

                
           
           
                <div onclick="navigateToTeacher('<%= teacher.idUser %>/slot')" style="cursor: pointer;" class="bookLesson">
                  <h4>Book lesson</h4>
              </div>
       
             
            </div>
        </div>
  
        <div class="topTeacherID">
          <div class="leftSideTeacherID">
            
            <div class="imgDivTeacher">
              <div class="imgDivTeacherCircle">
                <img src="<%= teacher.profile %>" alt="">
              </div>
              
            </div>
                <div class="nameDivTeacher">
                    <h1><%= teacher.firstName %> <%= teacher.lastName.toUpperCase() %></h1>
                    <p><%= teacher.teacherType %></p>
                    <p><%= teacher.country %> </p>
                </div>
                <div class="teachingTeachID">
                    <div class="teachingLeft">
                      <p>teaching :</p> 
                    </div>
                    <div class="teachingRight">
                        <% teacher.teachlang.forEach(function(country) { %>
                            <p><%= country %></p>
                          <% }); %>
                    </div>
                    
                  </div>
                
                </div>
           </div>  
         
  
          </div>
  
            
    </div>
    <div class="textTeacherIDMainDiv">
        <div class="textTeacherID">
            <pre class="pre">
                <%= teacher.profileText %>
            </pre>
        </div>
    </div>

    <div class="sendMessageToTeacher">
      <div class="sendMessageToTeacherInner" onclick="openDialog()">
          <p> Contact teacher</p>
      </div>
    </div>


    <div class="rankingTeacherIDMainDiv ">
        <div class="rankingTeacherID">
            <pre class="pre">
            
            </pre>
        </div>
    </div>
  
  </div>

</div>

<dialog id="myDialog">
    <div>
      <div class="myDialogQuestion">
        <h2>What language do you want to learn with me?</h2>
      </div>
        <div class="myDialogLanguageOptions">
             <div class="myDialogLanguageOption">English</div>
             <div class="myDialogLanguageOption">Spanish</div>
        </div>
      <div class="myDialogQuestion">
        <h2>What is your language level?</h2>
      </div>

      <div class="myDialogSlider">
        <div class="slider">
           <input type="range" min="0" max="5" step="1" value="0" class="range-slider">
            <div class="circles">
            <div class="circle" data-value="A1">A1</div>
            <div class="circle" data-value="A2">A2</div>
            <div class="circle" data-value="B1">B1</div>
            <div class="circle" data-value="B2">B2</div>
            <div class="circle" data-value="C1">C1</div>
            <div class="circle" data-value="C2">C2</div>
            </div>
        </div>
    </div>
  
      <div class="myDialogQuestion">
        <h2>Why do you want to learn this language？</h2>     
      </div>

          <div class="myDialogLanguagePurposeOptions">
             <div class="myDialogLanguagePurposeOption">Culture</div>
             <div class="myDialogLanguagePurposeOption">Daily life</div>
             <div class="myDialogLanguagePurposeOption">Travel</div>
             <div class="myDialogLanguagePurposeOption">Food</div>
             <div class="myDialogLanguagePurposeOption">Health</div>
             <div class="myDialogLanguagePurposeOption">Entertainment</div>
             <div class="myDialogLanguagePurposeOption">Test Preparation</div>
             <div class="myDialogLanguagePurposeOption">Family</div>
             <div class="myDialogLanguagePurposeOption">Business</div>
             <div class="myDialogLanguagePurposeOption">Other</div>
        </div>

        <div class="myDialogQuestion">
            <h2>Feel free to ask me any questions ？</h2> 
        </div>

        
        <div class="myDialogLanguageMessage">
            <textarea name="" id="" cols="30" rows="10"></textarea>
        </div>

        <div class="myDialogErrorMessage"></div>

        <div class="myDialogButtons">
            <div class="myDialogButtonSave">
              <button onclick="SaveLanguageLevel()">Send</button>
            </div>
            <div class="myDialogButtonCancel">
              <button onclick="closeDialog()">Cancel</button>
            </div>
          </div>
    
    </div>
  </dialog>
  
  <script>
    var dialog = document.getElementById("myDialog");
  
    function openDialog() {
      dialog.showModal();
    }
  
    function closeDialog() {
      dialog.close();
    }

    

    const myDialogErrorMessage = document.querySelector('.myDialogErrorMessage')
    

    const myDialogLanguagePurposeOptions = document.querySelectorAll('.myDialogLanguagePurposeOption')
    const myDialogLanguagePurposeOptionsArray = []

    myDialogLanguagePurposeOptions.forEach((purpose, purposeIndex) => {
        purpose.addEventListener('click', () => {
         
            const purposeValue = purpose.textContent;
            const isActive = purpose.classList.contains('active');

            if (isActive) {
            purpose.classList.remove('active');
            const index = myDialogLanguagePurposeOptionsArray.indexOf(purposeValue);
            if (index !== -1) {
                myDialogLanguagePurposeOptionsArray.splice(index, 1);
            }
            } else {
            purpose.classList.add('active');
            myDialogLanguagePurposeOptionsArray.push(purposeValue);
            }

        });
        });

    const myDialogLanguageOptions = document.querySelectorAll('.myDialogLanguageOption')

    let languageValue = '';
    myDialogLanguageOptions.forEach((language, languageIndex) => {
            language.addEventListener('click', () => {
                myDialogErrorMessage.innerHTML =''
                // Remove active class from all language options
                myDialogLanguageOptions.forEach((option) => {
                option.classList.remove('active');
                });

                // Add active class to the clicked language option
                language.classList.add('active');
                languageValue = language.textContent;
            
            });
            });

    const circles = document.querySelectorAll('.circle');
    const rangeSlider = document.querySelector('.range-slider');
    let circleValue;
  
    function updateSliderAndCircle(index) {
      rangeSlider.value = index;
  
      circles.forEach((circle, circleIndex) => {
        if (circleIndex === index) {
          circle.classList.add('active');
        } else {
          circle.classList.remove('active');
        }
      });
  
      circleValue = circles[index].dataset.value;
    }
  
    circles.forEach((circle, index) => {
      circle.addEventListener('click', () => {
        updateSliderAndCircle(index);
      });
    });
  
    rangeSlider.addEventListener('input', () => {
    const value = rangeSlider.value;
    updateSliderAndCircle(value);

    circles.forEach((circle, index) => {
      if (index == value) {
        circle.classList.add('active');
      } else {
        circle.classList.remove('active');
      }
    });
  });


  let constAreaValue;
  const textarea = document.querySelector('.myDialogLanguageMessage textarea');

    textarea.addEventListener('input', () => {
    constAreaValue = textarea.value
  });



 

    function SaveLanguageLevel() {
    if (languageValue.trim() === '') {
        myDialogErrorMessage.innerHTML = "You have to select at least a language you want to learn"
        return;
    }
      console.log(languageValue)  
      console.log(circleValue);
      console.log(myDialogLanguagePurposeOptionsArray)
      console.log(constAreaValue)
    }
  </script>


<script>
        function navigateToTeacher(teacherId) {
                  window.location.href = `/teachers/${teacherId}`;
                }
        
</script>


